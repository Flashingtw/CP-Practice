#include <bits/stdc++.h>using namespace std;const int OFFSET = 3005;const int MAX_DIFF = 6010;int main() {    ios_base::sync_with_stdio(false),cin.tie(NULL);    int n;    long long k;    if (!(cin >> n >> k)) return 0;    vector<int> a(n + 1);    vector<long long> P(n + 1, 0);    vector<int> D(n + 1, 0);    vector<vector<long long>> buckets(MAX_DIFF);    buckets[0 + OFFSET].push_back(0);    for (int i = 1; i <= n; i++) {        cin >> a[i];        P[i] = P[i - 1] + a[i];        if (a[i] % 2 != 0) {            D[i] = D[i - 1] + 1;        } else {            D[i] = D[i - 1] - 1;        }        buckets[D[i] + OFFSET].push_back(P[i]);    }    long long total_sum = P[n];    long long m_c = 0;    for (int i = 0; i <= n; i++) {        int target_diff = D[i] + D[n];        if (target_diff + OFFSET < 0 || target_diff + OFFSET >= MAX_DIFF) {            continue;        }        long long min_Px = P[i] + total_sum - k;        long long th = max(P[i], min_Px);        vector<long long>& ca = buckets[target_diff + OFFSET];        auto it = lower_bound(ca.begin(), ca.end(), th);        if (it != ca.end()) {            long long Px = *it;            long long current_collected = P[i] + (total_sum - Px);            m_c = max(m_c, current_collected);        }    }    cout << m_c << endl;}